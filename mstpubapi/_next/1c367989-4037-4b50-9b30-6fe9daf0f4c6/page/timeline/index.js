
          window.__NEXT_REGISTER_PAGE('/timeline', function() {
            var comp = module.exports=webpackJsonp([4],{253:function(e,t,a){e.exports=a(254)},254:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=a(114),s=n(l),i=a(8),u=n(i),r=a(1),o=n(r),c=a(2),m=n(c),f=a(9),d=n(f),h=a(10),v=n(h),p=a(3),E=n(p),x=a(39),y=n(x),k=a(81),_=n(k),M=a(115),b=n(M),g=a(125),N=n(g),w=a(128),C=(n(w),a(255)),S=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(C),D=a(38),T=n(D),P=function(e){function t(e){(0,o.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,u.default)(t)).call(this,e));return a.state={},a.state.message="",a.state.statuses=null,a.submitParams=a.submitParams.bind(a),a.moveUp=a.moveUp.bind(a),a.moveDown=a.moveDown.bind(a),a.moveMax=a.moveMax.bind(a),a.moveNow=a.moveNow.bind(a),a}return(0,v.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){var e=T.default.parse(window.location.search.replace(/^[?]/,""));this.refresh(e.host||"",e.type||"local",e.max||-1,e.since||-1)}},{key:"refresh",value:function(e,t,a,n){var l=this;if(this.setState({host:e}),this.setState({type:t}),this.setState({max:a}),this.setState({since:n}),this.inputHost.value=e,this.inputType.value=t,this.inputMax.value=a,this.inputSince.value=n,this.setState({statuses:null}),this.setState({message:""}),e){var i=null,u={limit:"40"};""==t?(i="/api/v1/timelines/public",u.local="true"):"local"==t?(i="/api/v1/timelines/public",u.local="true"):i="fera"==t?"/api/v1/timelines/public":"/api/v1/timelines/tag/"+t,a>0&&(u.max_id=a),n>0&&(u.since_id=n),console.log("queryUrl",i),console.log("queryPara",u);new b.default("",e).get(i,u).catch(function(e){l.setState({message:"Error in timeline status: "+(0,s.default)(e)})}).then(function(s){l.setState({statuses:s}),window.history.pushState({},"",window.location.pathname+"?host="+e+"&type="+t+"&max="+a+"&since="+n)})}}},{key:"submitParams",value:function(e){e.preventDefault(),this.refresh(this.inputHost.value,this.inputType.value,this.inputMax.value,this.inputSince.value)}},{key:"moveUp",value:function(e){e.preventDefault();var t=void 0;t=this.state.statuses&&this.state.statuses.length>0?this.state.statuses[0].id:this.state.since>0?this.state.since:this.state.max>0?this.state.max-1:this.state.since,this.refresh(this.state.host,this.state.type,-1,t)}},{key:"moveDown",value:function(e){e.preventDefault();var t=void 0;t=this.state.statuses&&this.state.statuses.length>0?this.state.statuses[this.state.statuses.length-1].id:this.state.max>0?this.state.max:this.state.since>0?this.state.since+1:this.state.max,this.refresh(this.state.host,this.state.type,t,-1)}},{key:"moveMax",value:function(e,t){e.preventDefault();var a=this.state.max;a<0&&(a=S.msToId((new Date).getTime()));var n=S.addMs(a,1e3*t);this.refresh(this.state.host,this.state.type,n,-1)}},{key:"moveNow",value:function(e){e.preventDefault(),this.refresh(this.state.host,this.state.type,-1,-1)}},{key:"render",value:function(){var e=this;return E.default.createElement(_.default,{title:"タイムライン"},E.default.createElement(y.default,null,E.default.createElement("link",{rel:"stylesheet",href:"../custom/style.css"}),E.default.createElement("base",{target:"_blank"})),E.default.createElement("p",null,"各タイムラインを参照します ",E.default.createElement("a",{href:"https://github.com/mei23/mstpubapi/blob/master/README.md#%E3%82%BF%E3%82%A4%E3%83%A0%E3%83%A9%E3%82%A4%E3%83%B3"},"説明")),E.default.createElement("div",{className:"change_form"},E.default.createElement("form",{onSubmit:this.submitParams},"Host:",E.default.createElement("input",{type:"text",ref:function(t){return e.inputHost=t},defaultValue:this.state.host,required:!0,style:{width:"10em"},title:"インスタンスホスト(例: example.com)"})," ","Type:",E.default.createElement("input",{type:"text",ref:function(t){return e.inputType=t},defaultValue:this.state.type,style:{width:"10em"},title:"種類(local=ローカル, fera=連合, その他はタグ扱い)"}),"(local/fera/タグ)"," ","Max:",E.default.createElement("input",{type:"text",ref:function(t){return e.inputMax=t},defaultValue:this.state.max,style:{width:"10em"},title:"このIDより前から表示(-1の場合最新から)"})," ","Since:",E.default.createElement("input",{type:"text",ref:function(t){return e.inputSince=t},defaultValue:this.state.since,style:{width:"10em"},title:"このIDの手前まで表示(-1の場合最大件数まで)"}),E.default.createElement("button",{type:"submit"},"変更反映"))),E.default.createElement("div",{className:"current_params"},"現在 Host: ",this.state.host," Type: ",this.state.type," Max: ",this.state.max," Since: ",this.state.since),E.default.createElement("div",null,E.default.createElement("div",{className:"pager_box",style:{display:"flex",justifyContent:"flex-end",alignItems:"center"}},E.default.createElement("div",{style:{marginRight:"auto"}},E.default.createElement("button",{onClick:this.moveUp,title:"新着のみを表示します"},"新着表示")),E.default.createElement("div",{style:{marginRight:"auto"}},E.default.createElement("button",{onClick:this.moveNow,title:"最新からの表示に戻ります"},"最新に戻る")),E.default.createElement("div",{style:{textAlign:"right",marginRight:"10px"}},E.default.createElement("div",null,"未来へ移動:",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,600)}},"10分"),"/",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,3600)}},"1時間"),"/",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,10800)}},"3時間"),"/",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,21600)}},"6時間"),"/",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,86400)}},"1日"),"/",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,259200)}},"3日"),"/",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,604800)}},"7日"),"/",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,2592e3)}},"30日")),E.default.createElement("div",null,"過去へ移動:",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,-600)}},"10分"),"/",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,-3600)}},"1時間"),"/",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,-10800)}},"3時間"),"/",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,-21600)}},"6時間"),"/",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,-86400)}},"1日"),"/",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,-259200)}},"3日"),"/",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,-604800)}},"7日"),"/",E.default.createElement("a",{className:"move_link",onClick:function(t){return e.moveMax(t,-2592e3)}},"30日"))),E.default.createElement("div",null,E.default.createElement("button",{onClick:this.moveDown,title:"表示中のステータスの次のページを表示します"},"次ページ"))),this.state.statuses?E.default.createElement("div",null,E.default.createElement("div",null,this.state.statuses.length," アイテム"),this.state.statuses.map(function(t){return E.default.createElement(N.default,{status:t,host:e.state.host})})):"取得中またはエラー",E.default.createElement("div",{className:"pager_box",style:{display:"flex",justifyContent:"flex-end",textAlign:"right"}},E.default.createElement("div",{style:{marginRight:"auto"}}),E.default.createElement("div",null,E.default.createElement("button",{onClick:this.moveDown,title:"表示中のステータスの次のページを表示します"},"次ページ")))),E.default.createElement("div",null,E.default.createElement("h3",null,"JSON"),E.default.createElement("h4",null,"statuses"),E.default.createElement("div",{className:"json_text"},(0,s.default)(this.state.statuses))))}}]),t}(E.default.Component);t.default=P},255:function(e,t,a){"use strict";function n(e){return e>9e16?2:1}function l(e){return e/u}function s(e){var t=e*u;return t=parseInt(t/u)*u}function i(e,t){return s(l(e)+t)}Object.defineProperty(t,"__esModule",{value:!0}),t.getIdRevision=n,t.idToMs=l,t.msToId=s,t.addMs=i;var u=Math.pow(2,16)}},[253]);
            return { page: comp.default }
          })
        